CREATE TABLE `USERS` (
  `ID`            INT         NOT NULL AUTO_INCREMENT,
  `NAME`          VARCHAR(45) NOT NULL,
  `LAST_NAME`     VARCHAR(45) NOT NULL,
  `LOGIN`         VARCHAR(45) NOT NULL,
  `PASSWORD`      VARCHAR(45) NOT NULL,
  `EMAIL`         VARCHAR(45) NOT NULL,
  `DATE_OF_BIRTH` DATE        NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `LOGIN_UNIQUE` (`LOGIN` ASC),
  UNIQUE INDEX `EMAIL_UNIQUE` (`EMAIL` ASC)
);

CREATE TABLE `USERS_TYPE` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `TYPE` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `TYPE_UNIQUE` (`TYPE` ASC));

ALTER TABLE `USERS`
ADD COLUMN `USERS_TYPE` INT NOT NULL AFTER `DATE_OF_BIRTH`;

ALTER TABLE `USERS`
CHANGE COLUMN `USERS_TYPE` `USERS_TYPE` INT NOT NULL ,
ADD INDEX `USERS_TYPE_ID_idx` (`USERS_TYPE` ASC);
ALTER TABLE `USERS`
ADD CONSTRAINT `USERS_TYPE_ID`
FOREIGN KEY (`USERS_TYPE`)
REFERENCES `USERS_TYPE` (`ID`)
  ON DELETE RESTRICT
  ON UPDATE CASCADE;


